{"version":3,"sources":["rexes/scalar/var.ts"],"names":[],"mappings":";;;;;;AAAA;;GAEG;AACH,iBAA2C,IAAI,CAAC,CAAA;AAGhD,sBAAuB,UAAU,CAAC,CAAA;AAClC,uBAAqB,cAAc,CAAC,CAAA;AACpC;IAA+B,0BAAY;IAG1C,gBAAY,OAAW,EAAU,OAAwB,EAAU,QAAyB;QAAnE,uBAAgC,GAAhC,cAAgC;QAAE,wBAAiC,GAAjC,eAAiC;QAC3F,iBAAO,CAAC;QADwB,YAAO,GAAP,OAAO,CAAiB;QAAU,aAAQ,GAAR,QAAQ,CAAiB;QAK5F,SAAI,GAAc;YACjB,IAAI,EAAG,KAAK;YACZ,IAAI,EAAG,gBAAQ,CAAC,GAAG;YACnB,UAAU,EAAG,IAAI;SACjB,CAAC;QAPD,IAAI,CAAC,KAAK,GAAG,OAAO,CAAC;IACtB,CAAC;IAQD,sBAAI,yBAAK;aAAT;YACC,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC;gBACnB,MAAM,eAAM,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACzC,CAAC;YACD,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC;QACpB,CAAC;aAED,UAAU,GAAO;YAChB,IAAI,CAAC,iBAAiB,EAAE,CAAC;YACzB,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC;gBACpB,MAAM,eAAM,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1C,CAAC;YAED,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;YACzB,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC,CAAC;gBACjC,MAAM,CAAC;YACR,CAAC;YACD,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;YAClB,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QAC3B,CAAC;;;OAdA;IAeF,aAAC;AAAD,CAnCA,AAmCC,CAnC8B,YAAS,GAmCvC;AAnCY,cAAM,SAmClB,CAAA","file":"rexes/scalar/var.js","sourcesContent":["/**\r\n * Created by Greg on 01/10/2016.\r\n */\r\nimport {IScalarChangeInfo, RexScalar} from './';\r\nimport {Rex} from \"../base\";\r\nimport {IRexInfo} from \"../\";\r\nimport {RexNames} from \"../names\";\r\nimport {Errors} from '../../errors';\r\nexport class RexVar<T> extends RexScalar<T> {\r\n\tprivate _value : T;\r\n\r\n\tconstructor(initial : T, private canRead : boolean = true, private canWrite : boolean = true) {\r\n\t\tsuper();\r\n\t\tthis.value = initial;\r\n\t}\r\n\r\n\tinfo : IRexInfo = {\r\n\t\tlazy : false,\r\n\t\ttype : RexNames.Var,\r\n\t\tfunctional : true\r\n\t};\r\n\r\n\tget value() {\r\n\t\tthis.makeSureNotClosed();\r\n\t\tif (!this.canRead) {\r\n\t\t\tthrow Errors.cannotRead(this.meta.name);\r\n\t\t}\r\n\t\treturn this._value;\r\n\t}\r\n\r\n\tset value(val : T) {\r\n\t\tthis.makeSureNotClosed();\r\n\t\tif (!this.canWrite) {\r\n\t\t\tthrow Errors.cannotWrite(this.meta.name);\r\n\t\t}\r\n\r\n\t\tlet oldVal = this._value;\r\n\t\tif (Object.is(this._value, val)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis._value = val;\r\n\t\tthis.notifyChange(oldVal);\r\n\t}\r\n}\r\n\r\n\r\n\r\n"],"sourceRoot":"/src"}